<!doctype html><html><head><meta charset=utf-8><title>XBee series 1 accelerometer sampling - mattoppenheim</title><meta name=pinterest content="nopin"><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><link rel="dns-prefetch preconnect" href=https://fonts.gstatic.com crossorigin><link rel="dns-prefetch preconnect" href=https://use.fontawesome.com crossorigin><meta name=theme-color content="#263238"><meta name=generator content="Hugo 0.105.0"><link rel=apple-touch-icon href=https://mattoppenheim.github.ioimages/logo.png><meta name=description content="XBee modules have a built in ADC, so why not sample an analog accelerometer directly? This will allow me to make a smaller wireless accelerometer that I can strap to my participants for testing with. Long term I want a microcontroller in the system for onboard signal processing. But for initial data collection, the smaller and simpler the better. Make it work. Make it fast. Make it right.. I am using the ADXL335 analog output 3-axis accelerometer connected to D0, D1 and D2 of an XBee series 1."><meta property="og:title" content="XBee series 1 accelerometer sampling - mattoppenheim"><meta property="og:type" content="article"><meta property="og:url" content="https://mattoppenheim.github.io/post/2016/12/xbee-series-1-accelerometer-sampling/"><meta property="og:image" content="https://mattoppenheim.github.io/images/default.png"><meta property="og:site_name" content="mattoppenheim"><meta property="og:description" content="XBee modules have a built in ADC, so why not sample an analog accelerometer directly? This will allow me to make a smaller wireless accelerometer that I can strap to my participants for testing with. Long term I want a microcontroller in the system for onboard signal processing. But for initial data collection, the smaller and simpler the better. Make it work. Make it fast. Make it right.. I am using the ADXL335 analog output 3-axis accelerometer connected to D0, D1 and D2 of an XBee series 1."><meta property="og:locale" content="ja_JP"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="mattoppenheim"><meta name=twitter:url content="https://mattoppenheim.github.io/post/2016/12/xbee-series-1-accelerometer-sampling/"><meta name=twitter:title content="XBee series 1 accelerometer sampling - mattoppenheim"><meta name=twitter:description content="XBee modules have a built in ADC, so why not sample an analog accelerometer directly? This will allow me to make a smaller wireless accelerometer that I can strap to my participants for testing with. Long term I want a microcontroller in the system for onboard signal processing. But for initial data collection, the smaller and simpler the better. Make it work. Make it fast. Make it right.. I am using the ADXL335 analog output 3-axis accelerometer connected to D0, D1 and D2 of an XBee series 1."><meta name=twitter:image content="https://mattoppenheim.github.io/images/default.png"><script type=application/ld+json>{"@context":"http://schema.org","@type":"NewsArticle","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/mattoppenheim.github.io"},"headline":"XBee series 1 accelerometer sampling-mattoppenheim","image":{"@type":"ImageObject","url":"https:\/\/mattoppenheim.github.io\/images\/default.png","height":800,"width":800},"datePublished":"2016-12-28T00:00:00JST","dateModified":"2016-12-28T00:00:00JST","author":{"@type":"Person","name":"mattoppenheim"},"publisher":{"@type":"Organization","name":"mattoppenheim","logo":{"@type":"ImageObject","url":"https:\/\/mattoppenheim.github.ioimages/logo.png","width":600,"height":60}},"description":"XBee modules have a built in ADC, so why not sample an analog accelerometer directly? This will allow me to make a smaller wireless accelerometer that I can strap to my participants for testing with. Long term I want a microcontroller in the system for onboard signal processing. But for initial data collection, the smaller and simpler the better. Make it work. Make it fast. Make it right.. I am using the ADXL335 analog output 3-axis accelerometer connected to D0, D1 and D2 of an XBee series 1."}</script><link rel=canonical href=https://mattoppenheim.github.io/post/2016/12/xbee-series-1-accelerometer-sampling/><link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel=stylesheet><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.13.0/css/all.css crossorigin=anonymous><style>html{font-size:18px;background-color:rgba(236,239,241,.5)}@media(max-width:768px){html{font-size:15px}}body{color:#333;font-family:roboto slab,ヒラギノ角ゴ pro w3,hiragino kaku gothic pro,メイリオ,Meiryo,sans-serif;font-feature-settings:"palt";font-size:inherit;line-height:1rem;margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:1rem;font-weight:700;line-height:1rem;margin:0}hr{border:0;border-top:1px dashed #cfd8dc;margin:1rem 0}p{margin:0;line-height:1rem}a{color:#2196f3;text-decoration:none;transition-duration:.3s}ul,ol{margin:0;padding:0}table{border-collapse:collapse;display:block;overflow-x:auto}th,td{font-size:.8rem;padding:.5rem}tr{border-bottom:1px dashed #ddd}main,aside{display:block}main{padding:1rem 0 3rem}.l-container{position:relative;max-width:68rem;margin:0 auto;padding:0 1rem}.l-container.thin{max-width:44rem}.l-header{background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,5%),0 1px 3px rgba(63,63,68,.1),0 1px 2px rgba(0,0,0,5%);padding:1rem 0;text-align:center}.l-header .description{margin-top:.5rem;font-size:.8rem}.l-footer{background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,5%),0 1px 3px rgba(63,63,68,.1),0 1px 2px rgba(0,0,0,5%);font-size:.6rem;font-weight:700;padding:1rem 0}.l-sidebar{margin:-1rem 0}@media(max-width:768px){.l-sidebar{margin-top:4rem}}.mrow{margin:0 -1rem;overflow:hidden}.mcol{box-sizing:border-box;float:left;padding:0 1rem}.c6{width:50%}.c4{width:33.26323833%}.c8{width:66.66666%}@media(max-width:768px){.mcol{width:100%;float:none}}.logo a{font-size:1.4rem;line-height:1.5rem;font-weight:700;color:#333}.articles{margin:-1rem 0;margin-bottom:1rem}.articles.sm{margin:-.5rem 0;margin-bottom:0}article{border-radius:4px;overflow:hidden}article.li{background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,5%),0 1px 3px rgba(63,63,68,.1),0 1px 2px rgba(0,0,0,5%);height:20rem;overflow:hidden;margin:1rem 0}article.li>a{display:block;color:#333}article.li .inner{padding:1rem}article.li .thumb{height:8rem}article.li .title{color:#333;font-size:1.2rem;line-height:1.5rem;margin-bottom:.5rem}article.li .summary{font-size:.8rem;height:6rem;overflow:hidden;margin-top:1rem}article.li .summary::after{content:'...'}article.lism{background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,5%),0 1px 3px rgba(63,63,68,.1),0 1px 2px rgba(0,0,0,5%);margin:.5rem 0}article.lism::after{content:'';display:block;clear:both}article.lism>a{display:block;color:#333}article.lism .inner{display:table-cell;vertical-align:middle;height:5rem;padding:0 .75rem}article.lism .thumb{width:5rem;height:5rem;float:left}article.lism .title{font-weight:700;font-size:.8rem;margin-bottom:.25rem}article.sn{background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,5%),0 1px 3px rgba(63,63,68,.1),0 1px 2px rgba(0,0,0,5%);margin-bottom:1rem}article.sn .thumb{height:20rem}@media(max-width:768px){article.sn .thumb{height:10rem}}article.sn>.article-header,article.sn>.article-body,article.sn .article-footer{padding:2rem}article.sn>.article-body{padding:0 2rem}@media(max-width:768px){article.sn>.article-header,article.sn>.article-body,article.sn .article-footer{padding:1rem}article.sn>.article-body{padding:0 1rem}}article.sn>.article-header .title{font-size:1.8rem;line-height:2rem;margin-bottom:.5rem}@media(max-width:768px){article.sn>.article-header .title{font-size:1.4rem;line-height:1.5rem}}article.sn>.article-header .facts{margin-bottom:1rem}article.sn>.article-body{margin-bottom:1.5rem}article.sn>.article-body h2{border-bottom:.25rem solid #333;font-size:1.2rem;line-height:1.5rem;margin:1.5rem 0;padding:.5rem 0}article.sn>.article-body h3{border-left:.5rem solid #333;line-height:1.5rem;margin:1.5rem 0;padding:.125rem .5rem}article.sn>.article-body ul,article.sn>.article-body ol{margin:1.5rem 0;padding-left:1.5rem}article.sn>.article-body li{padding-bottom:.5rem;line-height:1.5rem}article.sn>.article-body li:last-child{padding-bottom:0}article.sn>.article-body p{margin:1rem 0;line-height:1.5rem}article.sn>.article-body strong,article.sn>.article-body em{font-style:normal;font-weight:700}article.sn>.article-body strong{box-shadow:0 -.5rem #ffc107 inset}article.sn>.article-body em{color:#8bc34a}article.sn>.article-body h2 code{font-size:1.1rem}article.sn>.article-body h1 code,article.sn>.article-body h3 code,article.sn>.article-body h4 code,article.sn>.article-body h5 code,article.sn>.article-body h6 code{font-size:.9rem}article.sn>.article-body code,article.sn>.article-body pre{font-family:Menlo,Consolas,monospace;font-size:.7rem}article.sn>.article-body pre{background-color:#333;color:#fff;line-height:1rem;margin:1.5rem -2rem;overflow:auto}@media(max-width:768px){article.sn>.article-body pre{margin:1.5rem -1rem}}article.sn>.article-body pre>code{display:block;padding:1rem 2rem}@media(max-width:768px){article.sn>.article-body pre>code{padding:1rem}}article.sn>.article-body p code,article.sn>.article-body h1 code,article.sn>.article-body h2 code,article.sn>.article-body h3 code,article.sn>.article-body h4 code,article.sn>.article-body h5 code,article.sn>.article-body h6 code,article.sn>.article-body li code{background-color:#eceff1;color:#333;border-radius:4px;margin:0 .25rem;padding:.375rem;white-space:nowrap}article.sn>.article-body blockquote{position:relative;border-left:.25rem solid #333;font-size:.8rem;padding:.125rem 1rem;margin:1.5rem 0}@media(max-width:768px){article.sn>.article-body blockquote{font-size:1rem}}article.sn>.article-body blockquote p{margin:.5rem 0;line-height:1rem}article.sn>.article-body figure{margin:1.5rem 0}article.sn>.article-body img,article.sn>.article-body figure img,article.sn>.article-body figure amp-img{box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);max-width:100%;height:100%}article.sn>.article-body figcaption{color:#cfd8dc;font-size:.8rem;font-weight:700;margin-top:.5rem}.facts li{display:inline;font-size:.8rem;margin-right:1rem}.facts i{color:#cfd8dc;margin-right:.5em}.facts.sm li{font-size:.7rem}section.sidebar{margin:2rem 0}section.sidebar>header{font-size:.8rem;font-weight:700;letter-spacing:4px;text-align:center;margin:1.5rem 0}section.footer{margin:1rem 0}section.footer>header{font-size:.8rem;margin:.5rem 0}section.footer>header::before{content:"- "}section.footer>header a{font-weight:700;color:#333;text-decoration:underline}.terms{margin:-.25rem}.terms li{display:inline-block}.terms a{display:block;float:left;background-color:#333;border-radius:4px;color:#fff;font-size:.7rem;margin:.25rem;padding:0 .75rem;line-height:1.75rem}.paging{text-align:center;padding:1rem 0}.paging a{display:inline-block;background-color:#fff;box-shadow:0 0 0 1px rgba(63,63,68,5%),0 1px 3px rgba(63,63,68,.1),0 1px 2px rgba(0,0,0,5%);border-radius:4px;color:#333;padding:0 1rem;line-height:3rem}.page-title{text-align:center;margin:1rem 0}.page-title::after{content:'';display:block;border-bottom:.25rem solid #333;width:3rem;margin:1.5rem auto}.page-title>.title{font-size:1.2rem;line-height:1.5rem}.share{padding:0}.share a{display:inline-block;box-shadow:0 0 0 1px rgba(63,63,68,5%),0 1px 3px rgba(63,63,68,.1),0 1px 2px rgba(0,0,0,5%);min-width:1rem;height:2rem;border-radius:4px;color:#333;font-size:.8rem;font-weight:700;line-height:2rem;text-align:center;padding:0 .5rem}.adj article.lism{margin-bottom:1rem}.adj header{font-weight:700;font-size:.8rem}.toc{padding:0 2rem;margin:1rem 0}.toc nav>ul{background-color:#eceff1;border-radius:4px;display:inline-block;font-size:.8rem;padding:.5rem 1rem;word-break:break-all;list-style:none}.toc ul{padding:0}.toc ul ul{padding-left:1rem}.toc ul ul>li{font-weight:700;margin:.5rem 0;list-style-type:decimal}.toc ul ul ul{padding-left:1rem}.toc ul ul ul>li{list-style-type:disc;font-weight:500}.toc li{color:#90a4ae}@media(max-width:768px){.toc{padding:0 1rem}}.thumb{background-image:url(https://mattoppenheim.github.io/images/default.jpg);background-size:cover;background-position:50%}</style></head><body><header class=l-header><h1 class=logo><a href=https://mattoppenheim.github.io>mattoppenheim</a></h1></header><main><div class=l-container><div class=mrow><div class="mcol c8"><article class=sn><div class="thumb thumb-7cc377fad84ba24409db8066defe5143"></div><header class=article-header><h1 class=title>XBee series 1 accelerometer sampling</h1><ul class=facts><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=2016-12-28T00:00:00JST>Dec 28, 2016</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i><a href=https://mattoppenheim.github.iopost/>POST</a></li></ul><aside class=share><a href="https://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f&title=XBee%20series%201%20accelerometer%20sampling" title=はてなブックマーク class=ht target=_blank rel="noopener nofollow">B!</a>
<a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f&text=XBee%20series%201%20accelerometer%20sampling&tw_p=tweetbutton" title=Twitterでシェア class=tw target=_blank rel="noopener nofollow"><i class="fab fa-twitter" aria-hidden=true></i></a>
<a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f&t=XBee%20series%201%20accelerometer%20sampling" title=Facebookでシェア class=fb target=_blank rel="noopener nofollow"><i class="fab fa-facebook" aria-hidden=true></i></a>
<a href="https://getpocket.com/edit?url=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f&title=XBee%20series%201%20accelerometer%20sampling" title=Pocketに保存 class=pk target=_blank rel="noopener nofollow"><i class="fab fa-get-pocket" aria-hidden=true></i></a>
<a href="https://social-plugins.line.me/lineit/share?url=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f" title=LINEでシェア class=ln target=_blank rel="noopener nofollow"><i class="fab fa-line" aria-hidden=true></i></a></aside></header><div class=article-body><p>XBee modules have a built in ADC, so why not sample an analog accelerometer directly? This will allow me to make a smaller wireless accelerometer that I can strap to my participants for testing with. Long term I want a microcontroller in the system for onboard signal processing. But for initial data collection, the smaller and simpler the better. Make it work. Make it fast. Make it right.. I am using the <a href=http://www.analog.com/media/en/technical-documentation/data-sheets/ADXL335.pdf>ADXL335</a> analog output 3-axis accelerometer connected to D0, D1 and D2 of an XBee series 1. This idea is nothing new, I got the idea for this build from a website made by Dr. Eric Ayars, Associate Professor of Physics at the California State University, Chico <a href=http://phys-webapps.csuchico.edu/ayars/xbee/Welcome.html>here</a>. Thanks Eric! Initially I tried lashing up his design with the series 2 XBees that I had to hand. The issues with this are the two main differences that I found between the Series 1 and the Series 2 XBee ADC (analog to digital converter).</p><p>1. With the Series 2 XBee, the range of analog input that can be read by the ADC is set to be ground to 1.2V. With the Series 1 module, you set the top voltage that the ADC can sample by connecting that voltage to the VRef pin on the module. There is a VRef pin labelled on the Series 2, but it is not connected to anything. Usually you connect the voltage that you are using to power the module with (e.g. 3.3V) to the VRef pin on the Series 1 to enable the ADC to sample from ground to the supply voltage. You cannot connect a higher voltage than the supply voltage to this pin. Or the World will End. The output from the ADXL335 is centered around half of the voltage that it is powered with. In my case this is 3.3/2 = 1.65V. The output for each of the 3 accelerometers in the chip varies by 330mV/g. So the outputs will rarely dip below 1.2V and be sampled by a Series 2 XBee. Of course I could use a simple resistor network to bring the voltage output from the accelerometer down to be centered around 0.6V and be in with a chance of reading it with the XBee series 2. But this brings us on to issue 2.</p><p>2. The sample rate of the Series 2 XBee is lower than that of the Series 1. Using the Digi International XCTU tool for configuring the modules, with the Series 2, the fastest sample rate that I am allowed to set is 50ms. When I tested it, I was only getting about 16Hz. Thinking for a little while, I realise that the 50Hz sampling was being split across the 3 analog inputs that I am sampling (x, y and z axis). 3x16=48, so it all kind of makes sense. The Series 1 can be set to sample silly fast, down to 1ms. However, this brings us on to reading some XBee series 1 data and information sheets. This <a href=http://knowledge.digi.com/articles/Knowledge_Base_Article/Digital-and-analog-sampling-using-XBee-radios>article</a> from Digi International states that the maximum sample rate for the Series 1 is 50Hz, but it can be set to sample at up to 1KHz. I am interested in seeing just how fast this module can go&mldr;</p><p>The picture below shows the XBee series 1 module connected with an ADXL335 board - which is on the right of the photo. On the left there is a AAA battery connected to a DC-DC converter board, which provides an output of 3.3V for the ADXL335 and the XBee module. The same 3.3V rail is used as an input to the VREF pin on the XBee module. So the ADC should work from ground to 3.3V. I would imagine that the ADC will stall at about a diode drop (0.6V) from either limit.</p><p><img src=images/xbee_series1_breadboard_reduced.png alt></p><p>I set the sample rate on the XBee 1 to be 5ms using the XCTU tool, which equates to 200Hz.</p><p>I lashed up some code based on the XBee API samples. I use Python 3, which allows me to leverage the time.perf_counter() function in lines 12 and 16 to get microsecond timing. Please see the initial code and output below.</p><p>[code] from xbee import XBee import serial import time PORT = &lsquo;/dev/ttyUSB0&rsquo; BAUD_RATE = 115200 # Open serial port ser = serial.Serial(PORT, BAUD_RATE) # Create XBee Series 1 object xbee = XBee(ser, escaped=True) print(&lsquo;created xbee at {} with baud {}&rsquo;.format(PORT, BAUD_RATE)) print(&rsquo;listening for data&mldr;&rsquo;) dt_old = time.perf_counter() # Continuously read and print packets while True: dt_new = time.perf_counter() response = xbee.wait_read_frame() adc_dict=response[&lsquo;samples&rsquo;][0] delta_millis = (dt_new-dt_old)*1000 dt_old = dt_new try: print(&rsquo;{:.2f} {:.2f}&rsquo;.format(delta_millis, 1000/delta_millis)) except ZeroDivisionError as e: continue print(adc_dict[&lsquo;adc-0&rsquo;], adc_dict[&lsquo;adc-1&rsquo;], adc_dict[&lsquo;adc-2&rsquo;]) ser.close() [/code]</p><p>output:</p><p>[code language=&ldquo;shell&rdquo; light=&ldquo;true&rdquo;] created xbee at /dev/ttyUSB0 with baud 115200 listening for data&mldr; 0.00 1428571.69 526 409 502 10.67 93.73 526 409 503 0.25 4058.74 526 411 503 10.62 94.19 522 406 500 0.40 2474.43 523 409 502 11.26 88.85 516 412 505 0.62 1604.76 523 408 502 10.65 93.86 522 407 498 0.39 2591.94 522 403 500 10.64 94.02 [/code]</p><p>Ignore the first line of data, I expected that to be garbage. The lines of data should be:</p><p>[code language=&ldquo;shell&rdquo; light=&ldquo;true&rdquo;] adc-0, adc-1, adc-2 # which looks about right time in ms since the last sample, resulting frequency = 1000/time in ms since last sample # these don&rsquo;t look about right [/code]</p><p>We should be seeing a uniform sample and frequency. But it oscillates between about 11ms and 0.5ms. Which averages to be about 6ms. For all three channels. So the ADC is working at a sample rate of around 2ms.</p><p>I modified the code to include a 100 sample averaging calculation. This is implemented using a deque data container, initialised in line 13. The sample times are added in line 24. Prior to that, the oldest one is removed in line 13. The values are averaged and printed in line 26. The try, except clause around this line are necessary as the &lsquo;None&rsquo; values that the deque is intialised with cause the np.mean function to crash with a TypeError.</p><p>[code]</p><p>from collections import deque import numpy as np from xbee import XBee import serial import time</p><p>PORT = &lsquo;/dev/ttyUSB0&rsquo; BAUD_RATE = 115200 # Open serial port ser = serial.Serial(PORT, BAUD_RATE) # Create XBee Series 1 object xbee = XBee(ser, escaped=True) sample_deque = deque([None]*100, maxlen=100) print(&lsquo;created xbee at {} with baud {}&rsquo;.format(PORT, BAUD_RATE)) print(&rsquo;listening for data&mldr;&rsquo;) dt_old = time.perf_counter() # Continuously read and print packets while True: dt_new = time.perf_counter() response = xbee.wait_read_frame() adc_dict=response[&lsquo;samples&rsquo;][0] delta_millis = (dt_new-dt_old)*1000 sample_deque.pop() sample_deque.appendleft(delta_millis) try: print(&rsquo;{:.2f}&rsquo;.format(np.mean(sample_deque))) except TypeError: continue dt_old = dt_new try: print(&rsquo;{:.2f} {:.2f}&rsquo;.format(delta_millis, 1000/delta_millis)) except ZeroDivisionError as e: continue print(adc_dict[&lsquo;adc-0&rsquo;], adc_dict[&lsquo;adc-1&rsquo;], adc_dict[&lsquo;adc-2&rsquo;]) ser.close() [/code]</p><p>output after a few hundred samples:</p><p>[code language=&ldquo;shell&rdquo; light=&ldquo;true&rdquo;] 5.44 13.52 73.96 521 404 500 5.45 2.06 485.59 523 408 502 5.44 0.91 1103.39 526 409 504 5.44 11.06 90.38 516 412 507 5.45 [/code]</p><p>The data should be:</p><p>[code language=&ldquo;shell&rdquo; light=&ldquo;true&rdquo;] averaged interval in ms # looks about right last sample interval in ms, frequency calculated from last interval in Hz # still oscillating adc-0, adc-1, adc-2 [/code]</p><p>The average of around 5.5ms is close enough to the programmed value of 5ms for my purposes. Why does the sample time fluctuate? Probably something to do with my code. If you have an answer, please leave it below. The rigorous way to verify the accuracy and speed of this module is to plug in a function generator to the analog channels, record data then analyse that. How hard could that be? Errrr&mldr;.. I think that what I have now is &lsquo;good enough&rsquo; to try out shake gesture recognition. The next step is to get an output in &lsquo;g&rsquo; - that is units of gravity. As the sensitivity of the ADXL335 is 330mV/g with an input of 3.3V, the output is centred on half of the rail voltage and the ADC has a range of 0-1024: g = (ADC_count-512)/102.5 I made a python lambda function to do the conversion:</p><p>[code language=&ldquo;shell&rdquo; light=&ldquo;true&rdquo;] g = lambda x: (x-512)/102.4 [/code]</p><p>So I can output formatted accelerometer values in g by altering line 34 of the last listing to:</p><p>[code language=&ldquo;shell&rdquo; light=&ldquo;true&rdquo;] print(&rsquo;{:.2f} {:.2f} {:.2f}&rsquo;.format(g(adc_dict[&lsquo;adc-0&rsquo;]), g(adc_dict[&lsquo;adc-1&rsquo;]), g(adc_dict[&lsquo;adc-2&rsquo;]))) [/code]</p></div><footer class=article-footer><aside class=share><a href="https://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f&title=XBee%20series%201%20accelerometer%20sampling" title=はてなブックマーク class=ht target=_blank rel="noopener nofollow">B!</a>
<a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f&text=XBee%20series%201%20accelerometer%20sampling&tw_p=tweetbutton" title=Twitterでシェア class=tw target=_blank rel="noopener nofollow"><i class="fab fa-twitter" aria-hidden=true></i></a>
<a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f&t=XBee%20series%201%20accelerometer%20sampling" title=Facebookでシェア class=fb target=_blank rel="noopener nofollow"><i class="fab fa-facebook" aria-hidden=true></i></a>
<a href="https://getpocket.com/edit?url=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f&title=XBee%20series%201%20accelerometer%20sampling" title=Pocketに保存 class=pk target=_blank rel="noopener nofollow"><i class="fab fa-get-pocket" aria-hidden=true></i></a>
<a href="https://social-plugins.line.me/lineit/share?url=https%3a%2f%2fmattoppenheim.github.io%2fpost%2f2016%2f12%2fxbee-series-1-accelerometer-sampling%2f" title=LINEでシェア class=ln target=_blank rel="noopener nofollow"><i class="fab fa-line" aria-hidden=true></i></a></aside><section class=footer><header><a href=https://mattoppenheim.github.iotags/>TAGS</a></header><ul class=terms><li><a href=https://mattoppenheim.github.iotags/accelerometer/>accelerometer</a></li><li><a href=https://mattoppenheim.github.iotags/sampling/>sampling</a></li><li><a href=https://mattoppenheim.github.iotags/xbee/>xbee</a></li></ul></section></footer></article><div class="adj mrow"><div class="mcol c6"><header>Next Article</header><article class=lism><a href=https://mattoppenheim.github.io/post/2017/01/ewma-filter-example-using-pandas-and-python/><div class="thumb thumb-4f2dd0cc6aedf42de07a075f3d919419"></div><div class=inner><div class=title>EWMA filter example using pandas and python</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=9007-01-09T00:00:00JST>Jan 9, 2017</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article></div><div class="mcol c6"><header>Previous Article</header><article class=lism><a href=https://mattoppenheim.github.io/post/2016/10/using-pyzmq-to-communicate-between-guis-and-processes/><div class="thumb thumb-4769b38847a47b353fe7cff5ebb72d65"></div><div class=inner><div class=title>Using pyzmq to communicate between GUIs and processes</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=1007-10-01T00:00:00JST>Oct 1, 2016</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article></div></div></div><div class="mcol c4"><aside class=l-sidebar><section class=sidebar><header>LATESTS</header><div class="articles sm"><article class=lism><a href=https://mattoppenheim.github.io/post/2022/10/converting-kicad-nightly-build-to-kicad-stable/><div class="thumb thumb-a650b124ce45e26ebb7a65e2357d703b"></div><div class=inner><div class=title>Converting kicad-nightly build to kicad stable</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=12007-10-12T00:00:00JST>Oct 12, 2022</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2022/10/jacdac-using-the-black-magic-programmer/><div class="thumb thumb-055f630d6fb825ab775e5939e6223e0d"></div><div class=inner><div class=title>Jacdac: Using the Black Magic programmer</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=12007-10-12T00:00:00JST>Oct 12, 2022</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2022/05/using-microbits-to-send-data-to-and-from-an-arduino-wirelessly/><div class="thumb thumb-a5214e9b999e197bd08ef76d82293a4f"></div><div class=inner><div class=title>Using micro:bits to send data to and from an Arduino wirelessly</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=10007-05-10T00:00:00JST>May 10, 2022</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2022/05/logic-level-converter-between-an-arduino-and-microbit-using-a-fet-transistor/><div class="thumb thumb-2513cdb6f23eb9ce12686600f4e5e3fe"></div><div class=inner><div class=title>Logic level converter between an Arduino Uno and micro:bit using a FET transistor</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=1007-05-01T00:00:00JST>May 1, 2022</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2022/04/downloading-youtube-videos-using-termux-and-youtube-dl-on-android/><div class="thumb thumb-99946926ea762383b64f3640808c8ef5"></div><div class=inner><div class=title>Downloading YouTube videos using Termux and youtube-dl on Android</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=29007-04-29T00:00:00JST>Apr 29, 2022</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2022/04/kicad-fixing-invisible-gaps-in-board-outlines-on-the-edge-cuts-layer/><div class="thumb thumb-b8a8e92b4bd792ef7ae9e09662b62192"></div><div class=inner><div class=title>Kicad - fixing invisible gaps in board outlines on the Edge.Cuts layer</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=16007-04-16T00:00:00JST>Apr 16, 2022</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2022/04/installing-kicad-nightly-build-on-debian-11/><div class="thumb thumb-0aee508cb6a6c2dcc12e1d5c98ec725a"></div><div class=inner><div class=title>Installing kicad nightly-build on Debian 11</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=8007-04-08T00:00:00JST>Apr 8, 2022</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2022/02/remove-spikes-from-a-dataset-using-python/><div class="thumb thumb-0ed92fccd3e6413a138119558128b4af"></div><div class=inner><div class=title>Remove spikes from a dataset using python</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=25007-02-25T00:00:00JST>Feb 25, 2022</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2021/12/bendlabs-single-axis-bend-sensor/><div class="thumb thumb-d204e5f23fe1155f37071ecc587de825"></div><div class=inner><div class=title>Bendlabs single-axis bend sensor</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=30007-12-30T00:00:00JST>Dec 30, 2021</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article><article class=lism><a href=https://mattoppenheim.github.io/post/2021/12/mounting-an-android-phone-on-debian-linux-to-synchronise-files/><div class="thumb thumb-dcfcf5c61d3126c3fa9b237336aa9277"></div><div class=inner><div class=title>Mounting an Android phone on Debian Linux to synchronise files</div><ul class="facts sm"><li><i class="fas fa-calendar" aria-hidden=true></i><time datetime=28007-12-28T00:00:00JST>Dec 28, 2021</time></li><li><i class="fas fa-bookmark" aria-hidden=true></i>POST</li></ul></div></a></article></div></section><section class=sidebar><header>TAGS</header><ul class=terms><li><a href=https://mattoppenheim.github.iotags/microbit>microbit <span class=count>(26)</span></a></li><li><a href=https://mattoppenheim.github.iotags/python>python <span class=count>(16)</span></a></li><li><a href=https://mattoppenheim.github.iotags/microbit-2>microbit-2 <span class=count>(9)</span></a></li><li><a href=https://mattoppenheim.github.iotags/bbc-microbit>bbc-microbit <span class=count>(8)</span></a></li><li><a href=https://mattoppenheim.github.iotags/assistive-technology>assistive-technology <span class=count>(7)</span></a></li><li><a href=https://mattoppenheim.github.iotags/yotta>yotta <span class=count>(7)</span></a></li><li><a href=https://mattoppenheim.github.iotags/linux>linux <span class=count>(6)</span></a></li><li><a href=https://mattoppenheim.github.iotags/micropython>micropython <span class=count>(5)</span></a></li><li><a href=https://mattoppenheim.github.iotags/arduino>arduino <span class=count>(4)</span></a></li><li><a href=https://mattoppenheim.github.iotags/debian>debian <span class=count>(4)</span></a></li></ul></section></aside></div></div></main><footer class=l-footer><div class=l-container><p><span class=h-logo>&copy; mattoppenheim</span></p><aside><p>Powered by <a href=https://gohugo.io/>Hugo</a>.</p><p><a href=https://github.com/dim0627/hugo_theme_robust>Robust</a> designed by <a href=http://yet.unresolved.xyz/>Daisuke Tsuji</a>.</p></aside></div></footer></body></html>